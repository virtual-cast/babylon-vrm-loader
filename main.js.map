{"version":3,"sources":["webpack://babylon-vrm-loader/webpack/universalModuleDefinition","webpack://babylon-vrm-loader/webpack/bootstrap","webpack://babylon-vrm-loader/./src/errors.ts","webpack://babylon-vrm-loader/./src/humanoid-bone.ts","webpack://babylon-vrm-loader/./src/index.ts","webpack://babylon-vrm-loader/./src/secondary-animation/collider-group.ts","webpack://babylon-vrm-loader/./src/secondary-animation/collider.ts","webpack://babylon-vrm-loader/./src/secondary-animation/quaternion-helper.ts","webpack://babylon-vrm-loader/./src/secondary-animation/sphere-collider.ts","webpack://babylon-vrm-loader/./src/secondary-animation/spring-bone-controller.ts","webpack://babylon-vrm-loader/./src/secondary-animation/vector3-helper.ts","webpack://babylon-vrm-loader/./src/secondary-animation/vrm-spring-bone-logic.ts","webpack://babylon-vrm-loader/./src/secondary-animation/vrm-spring-bone.ts","webpack://babylon-vrm-loader/./src/test/index.ts","webpack://babylon-vrm-loader/./src/vcast-vci-material-unity.ts","webpack://babylon-vrm-loader/./src/vrm-extension.ts","webpack://babylon-vrm-loader/./src/vrm-file-loader.ts","webpack://babylon-vrm-loader/./src/vrm-interfaces.ts","webpack://babylon-vrm-loader/./src/vrm-manager.ts","webpack://babylon-vrm-loader/./src/vrm-material-generator.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"babylon-vrm-loader\"] = factory();\n\telse\n\t\troot[\"babylon-vrm-loader\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonpbabylon_vrm_loader\"] = window[\"webpackJsonpbabylon_vrm_loader\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/test/index.ts\",\"vendors~main\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/**\r\n * Throws when mandatory bone could not find\r\n */\r\nexport class BoneNotFoundError extends Error {\r\n    public readonly name = 'BoneNotFoundError';\r\n\r\n    public constructor(public readonly boneName: string) {\r\n        super(`Bone:${boneName} NotFound`);\r\n    }\r\n}\r\n","import { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { BoneNotFoundError } from './errors';\r\n\r\ninterface TransformNodeMap {\r\n    [name: string]: TransformNode;\r\n}\r\n\r\n/**\r\n * HumanoidBone \r\n * @see https://docs.unity3d.com/ja/2018.3/ScriptReference/HumanBodyBones.html\r\n */\r\nexport class HumanoidBone {\r\n    public constructor(private nodeMap: TransformNodeMap) {}\r\n\r\n    public dispose() {\r\n        delete this.nodeMap;\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    public get hips() {\r\n        return this.getMandatoryBone('hips');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftUpperLeg() {\r\n        return this.getMandatoryBone('leftUpperLeg');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightUpperLeg() {\r\n        return this.getMandatoryBone('rightUpperLeg');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftLowerLeg() {\r\n        return this.getMandatoryBone('leftLowerLeg');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightLowerLeg() {\r\n        return this.getMandatoryBone('rightLowerLeg');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftFoot() {\r\n        return this.getMandatoryBone('leftFoot');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightFoot() {\r\n        return this.getMandatoryBone('rightFoot');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get spine() {\r\n        return this.getMandatoryBone('spine');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get chest() {\r\n        return this.getMandatoryBone('chest');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get neck() {\r\n        return this.getMandatoryBone('neck');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get head() {\r\n        return this.getMandatoryBone('head');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftShoulder() {\r\n        return this.getMandatoryBone('leftShoulder');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightShoulder() {\r\n        return this.getMandatoryBone('rightShoulder');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftUpperArm() {\r\n        return this.getMandatoryBone('leftUpperArm');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightUpperArm() {\r\n        return this.getMandatoryBone('rightUpperArm');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftLowerArm() {\r\n        return this.getMandatoryBone('leftLowerArm');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightLowerArm() {\r\n        return this.getMandatoryBone('rightLowerArm');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get leftHand() {\r\n        return this.getMandatoryBone('leftHand');\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    public get rightHand() {\r\n        return this.getMandatoryBone('rightHand');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftToes() {\r\n        return this.getOptionalBone('leftToes');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightToes() {\r\n        return this.getOptionalBone('rightToes');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftEye() {\r\n        return this.getOptionalBone('leftEye');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightEye() {\r\n        return this.getOptionalBone('rightEye');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get jaw() {\r\n        return this.getOptionalBone('jaw');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftThumbProximal() {\r\n        return this.getOptionalBone('leftThumbProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftThumbIntermediate() {\r\n        return this.getOptionalBone('leftThumbIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftThumbDistal() {\r\n        return this.getOptionalBone('leftThumbDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftIndexProximal() {\r\n        return this.getOptionalBone('leftIndexProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftIndexIntermediate() {\r\n        return this.getOptionalBone('leftIndexIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftIndexDistal() {\r\n        return this.getOptionalBone('leftIndexDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftMiddleProximal() {\r\n        return this.getOptionalBone('leftMiddleProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftMiddleIntermediate() {\r\n        return this.getOptionalBone('leftMiddleIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftMiddleDistal() {\r\n        return this.getOptionalBone('leftMiddleDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftRingProximal() {\r\n        return this.getOptionalBone('leftRingProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftRingIntermediate() {\r\n        return this.getOptionalBone('leftRingIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftRingDistal() {\r\n        return this.getOptionalBone('leftRingDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftLittleProximal() {\r\n        return this.getOptionalBone('leftLittleProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftLittleIntermediate() {\r\n        return this.getOptionalBone('leftLittleIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get leftLittleDistal() {\r\n        return this.getOptionalBone('leftLittleDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightThumbProximal() {\r\n        return this.getOptionalBone('rightThumbProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightThumbIntermediate() {\r\n        return this.getOptionalBone('rightThumbIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightThumbDistal() {\r\n        return this.getOptionalBone('rightThumbDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightIndexProximal() {\r\n        return this.getOptionalBone('rightIndexProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightIndexIntermediate() {\r\n        return this.getOptionalBone('rightIndexIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightIndexDistal() {\r\n        return this.getOptionalBone('rightIndexDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightMiddleProximal() {\r\n        return this.getOptionalBone('rightMiddleProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightMiddleIntermediate() {\r\n        return this.getOptionalBone('rightMiddleIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightMiddleDistal() {\r\n        return this.getOptionalBone('rightMiddleDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightRingProximal() {\r\n        return this.getOptionalBone('rightRingProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightRingIntermediate() {\r\n        return this.getOptionalBone('rightRingIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightRingDistal() {\r\n        return this.getOptionalBone('rightRingDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightLittleProximal() {\r\n        return this.getOptionalBone('rightLittleProximal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightLittleIntermediate() {\r\n        return this.getOptionalBone('rightLittleIntermediate');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get rightLittleDistal() {\r\n        return this.getOptionalBone('rightLittleDistal');\r\n    }\r\n    /**\r\n     * (Optional)\r\n     */\r\n    public get upperChest() {\r\n        return this.getOptionalBone('upperChest');\r\n    }\r\n\r\n    /**\r\n     * \r\n     *\r\n     * @throws BoneNotFoundError\r\n     * @param name HumanoidBoneName\r\n     */\r\n    private getMandatoryBone(name: string): TransformNode {\r\n        const node = this.nodeMap[name];\r\n        if (!node) {\r\n            throw new BoneNotFoundError(name);\r\n        }\r\n        return node;\r\n    }\r\n\r\n    /**\r\n     * \r\n     *\r\n     * @param name HumanoidBoneName\r\n     */\r\n    private getOptionalBone(name: string): Nullable<TransformNode> {\r\n        return this.nodeMap[name] || null;\r\n    }\r\n}\r\n","export * from './errors';\r\nexport * from './humanoid-bone';\r\nexport * from './vcast-vci-material-unity';\r\nexport * from './vci-interfaces';\r\nexport * from './vrm-extension';\r\nexport * from './vrm-file-loader';\r\nexport * from './vrm-interfaces';\r\nexport * from './vrm-manager';\r\nexport * from './vrm-material-generator';\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { Collider } from './collider';\r\n\r\n/**\r\n * VRM SpringBone ColliderGroup\r\n */\r\nexport class ColliderGroup {\r\n    public readonly colliders: Collider[] = [];\r\n\r\n    /**\r\n     * @param transform The node of the collider group for setting up collision detections.\r\n     */\r\n    public constructor(\r\n        public readonly transform: TransformNode,\r\n    ) {\r\n    }\r\n\r\n    /**\r\n     * Add offsetted collider\r\n     *\r\n     * @param offset The local coordinate from the node of the collider group.\r\n     * @param radius The radius of the collider.\r\n     */\r\n    public addCollider(offset: Vector3, radius: number) {\r\n        this.colliders.push(new Collider(offset, radius));\r\n    }\r\n}\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\n\r\n/**\r\n * Collider\r\n */\r\nexport class Collider {\r\n    /**\r\n     * @param offset The local coordinate from the node of the collider group.\r\n     * @param radius The radius of the collider.\r\n     */\r\n    public constructor(\r\n        public readonly offset: Vector3,\r\n        public readonly radius: number,\r\n    ) {\r\n    }\r\n}\r\n","import { Vector3, Quaternion } from '@babylonjs/core/Maths/math';\r\n\r\n/**\r\n * Quaternion Helper\r\n */\r\nexport class QuaternionHelper {\r\n    /**\r\n     * Rotates the point point with rotation.\r\n     *\r\n     * Quaternion * Vector3\r\n     *\r\n     * @param quat\r\n     * @param vec\r\n     * @see https://docs.unity3d.com/2017.4/Documentation/ScriptReference/Quaternion-operator_multiply.html\r\n     * @see https://answers.unity.com/questions/372371/multiply-quaternion-by-vector3-how-is-done.html\r\n     * @see https://github.com/adragonite/math3d/blob/master/src/Quaternion.js#L287\r\n     */\r\n    public static multiplyWithVector3(quat: Quaternion, vec: Vector3): Vector3 {\r\n        const num = quat.x * 2;\r\n        const num2 = quat.y * 2;\r\n        const num3 = quat.z * 2;\r\n        const num4 = quat.x * num;\r\n        const num5 = quat.y * num2;\r\n        const num6 = quat.z * num3;\r\n        const num7 = quat.x * num2;\r\n        const num8 = quat.x * num3;\r\n        const num9 = quat.y * num3;\r\n        const num10 = quat.w * num;\r\n        const num11 = quat.w * num2;\r\n        const num12 = quat.w * num3;\r\n        const result = new Vector3();\r\n        result.x = (1 - (num5 + num6)) * vec.x + (num7 - num12) * vec.y + (num8 + num11) * vec.z;\r\n        result.y = (num7 + num12) * vec.x + (1 - (num4 + num6)) * vec.y + (num9 - num10) * vec.z;\r\n        result.z = (num8 - num11) * vec.x + (num9 + num10) * vec.y + (1 - (num4 + num5)) * vec.z;\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a rotation which rotates from fromDirection to toDirection.\r\n     *\r\n     * @see https://docs.unity3d.com/2017.4/Documentation/ScriptReference/Quaternion.FromToRotation.html\r\n     * @see https://stackoverflow.com/questions/51549366/what-is-the-math-behind-fromtorotation-unity3d\r\n     */\r\n    public static fromToRotation(from: Vector3, to: Vector3): Quaternion {\r\n        const axis = Vector3.Cross(from, to).normalize();\r\n        const a = Vector3.Dot(from, to);\r\n        const b = from.length() * to.length();\r\n        const phi = Math.acos(Math.max(0.0, Math.min(1.0, a / b)));\r\n        const sin = Math.sin(phi / 2);\r\n        return new Quaternion(\r\n            sin * axis.x,\r\n            sin * axis.y,\r\n            sin * axis.z,\r\n            Math.cos(phi / 2),\r\n        );\r\n    }\r\n}\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\n\r\n/**\r\n * Runtime Sphere Collider\r\n */\r\nexport class SphereCollider {\r\n    /**\r\n     * @param position Absolute Collider Position\r\n     * @param radius Collider radius\r\n     */\r\n    public constructor(\r\n        public readonly position: Vector3,\r\n        public readonly radius: number,\r\n    ) {}\r\n}\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { IVRMSecondaryAnimation } from '../vrm-interfaces';\r\nimport { ColliderGroup } from './collider-group';\r\nimport { VRMSpringBone } from './vrm-spring-bone';\r\n\r\n/**\r\n * function to get bone from nodeIndex\r\n */\r\ntype getBone = (nodeIndex: number) => Nullable<TransformNode>;\r\n\r\n/**\r\n * VRM SpringBone Controller\r\n */\r\nexport class SpringBoneController {\r\n    /**\r\n     * Spring Bone List\r\n     */\r\n    private springs: VRMSpringBone[];\r\n\r\n    /**\r\n     * @param ext SecondaryAnimation Object\r\n     * @param getBone\r\n     */\r\n    public constructor(\r\n        public readonly ext: IVRMSecondaryAnimation,\r\n        getBone: getBone,\r\n    ) {\r\n        const colliderGroups = this.constructColliderGroups(getBone);\r\n        this.springs = this.constructSprings(getBone, colliderGroups);\r\n    }\r\n\r\n    public dispose() {\r\n        this.springs = [];\r\n    }\r\n\r\n    /**\r\n     * Initialize SpringBones\r\n     */\r\n    public setup(force = false) {\r\n        this.springs.forEach((spring) => {\r\n            spring.setup(force);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update all SpringBones\r\n     *\r\n     * @param deltaTime Elapsed sec from previous frame\r\n     * @see https://docs.unity3d.com/ScriptReference/Time-deltaTime.html\r\n     */\r\n    public async update(deltaTime: number): Promise<void> {\r\n        //  clamp\r\n        deltaTime = Math.max(0.0, Math.min(16.666, deltaTime)) / 1000;\r\n        const promises = this.springs.map<Promise<void>>((spring) => {\r\n            return spring.update(deltaTime);\r\n        });\r\n        return Promise.all(promises).then(() => { /* Do nothing */ });\r\n    }\r\n\r\n    private constructColliderGroups(getBone: getBone) {\r\n        const colliderGroups: ColliderGroup[] = [];\r\n        this.ext.colliderGroups.forEach((colliderGroup) => {\r\n            const bone = getBone(colliderGroup.node) as TransformNode;\r\n            const g = new ColliderGroup(bone);\r\n            colliderGroup.colliders.forEach((collider) => {\r\n                g.addCollider(\r\n                    // Unity  X, Z \r\n                    new Vector3(-collider.offset.x, collider.offset.y, -collider.offset.z),\r\n                    collider.radius,\r\n                );\r\n            });\r\n            colliderGroups.push(g);\r\n        });\r\n        return colliderGroups;\r\n    }\r\n\r\n    private constructSprings(getBone: getBone, colliderGroups: ColliderGroup[]) {\r\n        const springs: VRMSpringBone[] = [];\r\n        this.ext.boneGroups.forEach((spring) => {\r\n            const rootBones = (spring.bones || []).map((bone) => {\r\n                return getBone(bone) as TransformNode;\r\n            });\r\n            const springColliders = (spring.colliderGroups || []).map<ColliderGroup>((g) => {\r\n                return colliderGroups[g];\r\n            });\r\n            springs.push(new VRMSpringBone(\r\n                spring.comment,\r\n                spring.stiffiness,\r\n                spring.gravityPower,\r\n                new Vector3(\r\n                    // Unity  X, Z \r\n                    -spring.gravityDir.x,\r\n                    spring.gravityDir.y,\r\n                    -spring.gravityDir.z,\r\n                ).normalize(),\r\n                spring.dragForce,\r\n                getBone(spring.center),\r\n                spring.hitRadius,\r\n                rootBones,\r\n                springColliders,\r\n            ));\r\n        });\r\n        return springs;\r\n    }\r\n}\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\n\r\n/**\r\n * Vector3 Helper\r\n */\r\nexport class Vector3Helper {\r\n    /**\r\n     * Vector3 * float\r\n     *\r\n     * @param original\r\n     * @param amount\r\n     */\r\n    public static multiplyByFloat(original: Vector3, amount: number): Vector3 {\r\n        return new Vector3(\r\n            original.x * amount,\r\n            original.y * amount,\r\n            original.z * amount,\r\n        );\r\n    }\r\n}\r\n","import { Quaternion, Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { QuaternionHelper } from './quaternion-helper';\r\nimport { SphereCollider } from './sphere-collider';\r\nimport { Vector3Helper } from './vector3-helper';\r\n\r\n/**\r\n * Verlet Spring Bone Logic\r\n */\r\nexport class VRMSpringBoneLogic {\r\n    /**\r\n     * Cloned initial local rotation\r\n     */\r\n    private readonly localRotation: Quaternion;\r\n    /**\r\n     * Reference of parent rotation\r\n     */\r\n    private readonly parentRotation: Quaternion;\r\n    private readonly boneAxis: Vector3;\r\n    private readonly boneLength: number;\r\n\r\n    private currentTail: Vector3;\r\n    private prevTail: Vector3;\r\n\r\n    /**\r\n     * @param center Center reference of TransformNode\r\n     * @param radius Collision Radius\r\n     * @param transform Base TransformNode\r\n     * @param localChildPosition\r\n     */\r\n    public constructor(\r\n        center: Nullable<TransformNode>,\r\n        public readonly radius: number,\r\n        public readonly transform: TransformNode,\r\n        localChildPosition: Vector3,\r\n    ) {\r\n        // Initialize rotationQuaternion when not initialized\r\n        if (!transform.rotationQuaternion) {\r\n            transform.rotationQuaternion = transform.rotation.toQuaternion();\r\n        }\r\n        const parent = transform.parent as Nullable<TransformNode>;\r\n        if (parent !== null && parent.rotationQuaternion === null) {\r\n            parent.rotationQuaternion = parent.rotation.toQuaternion();\r\n        }\r\n        this.parentRotation = parent && parent.rotationQuaternion || Quaternion.Identity();\r\n\r\n        const worldChildPosition = transform.getAbsolutePosition().add(localChildPosition);\r\n        this.currentTail = this.getCenterTranslatedPos(center, worldChildPosition);\r\n        this.prevTail = this.currentTail;\r\n        this.localRotation = transform.rotationQuaternion.clone();\r\n        this.boneAxis = Vector3.Normalize(localChildPosition);\r\n        this.boneLength = localChildPosition.length();\r\n    }\r\n\r\n    /**\r\n     * Update Tail position\r\n     *\r\n     * @param center Center reference of TransformNode\r\n     * @param stiffnessForce Current frame stiffness\r\n     * @param dragForce Current frame drag force\r\n     * @param external Current frame external force\r\n     * @param colliders Current frame colliders\r\n     */\r\n    public update(\r\n        center: Nullable<TransformNode>,\r\n        stiffnessForce: number,\r\n        dragForce: number,\r\n        external: Vector3,\r\n        colliders: SphereCollider[],\r\n    ): void {\r\n        const absPos = this.transform.getAbsolutePosition();\r\n        if (Number.isNaN(absPos.x)) {\r\n            // Do not update when absolute position is invalid\r\n            return;\r\n        }\r\n        const currentTail = this.getCenterTranslatedWorldPos(center, this.currentTail);\r\n        const prevTail = this.getCenterTranslatedWorldPos(center, this.prevTail);\r\n\r\n        // verlet \r\n        let nextTail = currentTail;\r\n        {\r\n            // \r\n            const attenuation = 1.0 - dragForce;\r\n            const delta = Vector3Helper.multiplyByFloat(currentTail.subtract(prevTail), attenuation);\r\n            nextTail.addInPlace(delta);\r\n        }\r\n        {\r\n            // \r\n            const rotation = this.parentRotation.multiply(this.localRotation); // parentRotation * localRotation\r\n            const rotatedVec = QuaternionHelper.multiplyWithVector3(rotation, this.boneAxis); // rotation * boneAxis\r\n            const stiffedVec = Vector3Helper.multiplyByFloat(rotatedVec, stiffnessForce); // rotatedVec * stiffnessForce\r\n            nextTail.addInPlace(stiffedVec); // nextTail + stiffedVec\r\n        }\r\n        {\r\n            // \r\n            nextTail.addInPlace(external);\r\n        }\r\n\r\n        {\r\n            //  boneLength \r\n            const normalized = nextTail.subtract(absPos).normalize();\r\n            nextTail = absPos.add(Vector3Helper.multiplyByFloat(normalized, this.boneLength));\r\n        }\r\n\r\n        {\r\n            // Collision \r\n            nextTail = this.collide(colliders, nextTail);\r\n        }\r\n\r\n        this.prevTail = this.getCenterTranslatedPos(center, currentTail);\r\n        this.currentTail = this.getCenterTranslatedPos(center, nextTail);\r\n\r\n        // \r\n        this.transform.rotationQuaternion = this.transformToRotation(nextTail);\r\n    }\r\n\r\n    private getCenterTranslatedWorldPos(center: Nullable<TransformNode>, pos: Vector3): Vector3 {\r\n        if (center !== null) {\r\n            return center.getAbsolutePosition().add(pos);\r\n        }\r\n        return pos;\r\n    }\r\n\r\n    private getCenterTranslatedPos(center: Nullable<TransformNode>, pos: Vector3): Vector3 {\r\n        if (center !== null) {\r\n            return center.position.add(pos);\r\n        }\r\n        return pos;\r\n    }\r\n\r\n    /**\r\n     * \r\n     *\r\n     * @see https://stackoverflow.com/questions/51549366/what-is-the-math-behind-fromtorotation-unity3d\r\n     */\r\n    private transformToRotation(nextTail: Vector3): Quaternion {\r\n        const rotation = this.parentRotation.multiply(this.localRotation);\r\n        const fromAxis = QuaternionHelper.multiplyWithVector3(rotation, this.boneAxis);\r\n        const toAxis = nextTail.subtract(this.transform.absolutePosition).normalize();\r\n        const result = QuaternionHelper.fromToRotation(fromAxis, toAxis);\r\n        return result.multiplyInPlace(rotation);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param colliders SphereColliders\r\n     * @param nextTail NextTail\r\n     */\r\n    private collide(colliders: SphereCollider[], nextTail: Vector3): Vector3 {\r\n        colliders.forEach((collider) => {\r\n            const r = this.radius + collider.radius;\r\n            const axis = nextTail.subtract(collider.position);\r\n            //  2 cm \r\n            if (axis.lengthSquared() <= (r * r) - 0.02) {\r\n                //  Collider \r\n                const posFromCollider = collider.position.add(Vector3Helper.multiplyByFloat(axis.normalize(), r));\r\n                //  boneLength \r\n                const absPos = this.transform.absolutePosition;\r\n                nextTail = absPos.add(Vector3Helper.multiplyByFloat(posFromCollider.subtractInPlace(absPos).normalize(), this.boneLength));\r\n            }\r\n        });\r\n        return nextTail;\r\n    }\r\n}\r\n","import { StandardMaterial } from '@babylonjs/core/Materials/standardMaterial';\r\nimport { Color3, Quaternion, Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder';\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { ColliderGroup } from './collider-group';\r\nimport { SphereCollider } from './sphere-collider';\r\nimport { Vector3Helper } from './vector3-helper';\r\nimport { VRMSpringBoneLogic } from './vrm-spring-bone-logic';\r\n\r\n/**\r\n * @see https://github.com/vrm-c/UniVRM/blob/master/Assets/VRM/UniVRM/Scripts/SpringBone/VRMSpringBone.cs\r\n */\r\nexport class VRMSpringBone {\r\n    public verlets: VRMSpringBoneLogic[] = [];\r\n    private initialLocalRotations: Quaternion[] = [];\r\n    private activeBones: TransformNode[] = [];\r\n\r\n    /** @hidden */\r\n    private drawGizmo = false;\r\n    private boneGizmoList: Mesh[] = [];\r\n    private colliderGizmoList: Mesh[] = [];\r\n\r\n    /**\r\n     * @see https://vrm.dev/en/vrm_spec/\r\n     * @param comment Annotation comment\r\n     * @param stiffness The resilience of the swaying object (the power of returning to the initial pose).\r\n     * @param gravityPower The strength of gravity.\r\n     * @param gravityDir The direction of gravity. Set (0, -1, 0) for simulating the gravity. Set (1, 0, 0) for simulating the wind.\r\n     * @param dragForce The resistance (deceleration) of automatic animation.\r\n     * @param center The reference point of a swaying object can be set at any location except the origin.\r\n     *               When implementing UI moving with warp,\r\n     *               the parent node to move with warp can be specified if you don't want to make the object swaying with warp movement.\r\n     * @param hitRadius The radius of the sphere used for the collision detection with colliders.\r\n     * @param bones Specify the node index of the root bone of the swaying object.\r\n     * @param colliderGroups Specify the index of the collider group for collisions with swaying objects.\r\n     */\r\n    public constructor(\r\n        public readonly comment: string,\r\n        public readonly stiffness: number,\r\n        public readonly gravityPower: number,\r\n        public readonly gravityDir: Vector3,\r\n        public readonly dragForce: number,\r\n        public readonly center: Nullable<TransformNode>,\r\n        public readonly hitRadius: number,\r\n        public readonly bones: Array<Nullable<TransformNode>>,\r\n        public readonly colliderGroups: ColliderGroup[],\r\n    ) {\r\n        this.activeBones = this.bones.filter((bone) => bone !== null) as TransformNode[];\r\n        this.activeBones.forEach((bone) => {\r\n            bone.rotationQuaternion = bone.rotationQuaternion || bone.rotation.toQuaternion();\r\n            this.initialLocalRotations.push(bone.rotationQuaternion.clone());\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize bones\r\n     *\r\n     * @param force Force reset rotation\r\n     */\r\n    public setup(force = false): void {\r\n        if (!force) {\r\n            this.activeBones.forEach((bone, index) => {\r\n                bone.rotationQuaternion = this.initialLocalRotations[index]!.clone();\r\n            });\r\n        }\r\n        this.verlets = [];\r\n\r\n        this.activeBones.forEach((bone, index) => {\r\n            this.initialLocalRotations[index]! = bone.rotationQuaternion!;\r\n\r\n            this.setupRecursive(this.center, bone);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update bones\r\n     *\r\n     * @param deltaTime\r\n     */\r\n    public async update(deltaTime: number): Promise<void> {\r\n        if (this.verlets.length === 0) {\r\n            if (this.activeBones.length === 0) {\r\n                return;\r\n            }\r\n            this.setup();\r\n        }\r\n\r\n        const colliderList: SphereCollider[] = [];\r\n        this.colliderGroups.forEach((group) => {\r\n            if (!group) {\r\n                return;\r\n            }\r\n            const absPos = group.transform.getAbsolutePosition();\r\n            if (Number.isNaN(absPos.x)) {\r\n                return;\r\n            }\r\n            group.colliders.forEach((collider) => {\r\n                const pos = absPos.add(collider.offset);\r\n                colliderList.push(new SphereCollider(\r\n                    pos,\r\n                    collider.radius,\r\n                ));\r\n\r\n                if (this.drawGizmo) {\r\n                    if (this.colliderGizmoList.length < colliderList.length) {\r\n                        const mesh = MeshBuilder.CreateSphere(`${group.transform.name}_colliderGizmo`, {\r\n                            segments: 8,\r\n                            diameter: 1,\r\n                            updatable: true,\r\n                        }, group.transform.getScene());\r\n                        const mat = new StandardMaterial(group.transform.name + '_colliderGizmomat', group.transform.getScene());\r\n                        mat.emissiveColor = Color3.Yellow();\r\n                        mat.wireframe = true;\r\n                        mesh.material = mat;\r\n                        this.colliderGizmoList.push(mesh);\r\n                    }\r\n                    this.colliderGizmoList[colliderList.length - 1].position = pos;\r\n                    this.colliderGizmoList[colliderList.length - 1].scaling = new Vector3(collider.radius * 2, collider.radius * 2, collider.radius * 2);\r\n                }\r\n            });\r\n        });\r\n\r\n        const stiffness = this.stiffness * deltaTime;\r\n        const external = Vector3Helper.multiplyByFloat(this.gravityDir, this.gravityPower * deltaTime);\r\n\r\n        const promises = this.verlets.map<Promise<void>>((verlet, index) => {\r\n            return new Promise<void>((resolve) => {\r\n                verlet.update(\r\n                    this.center,\r\n                    stiffness,\r\n                    this.dragForce,\r\n                    external,\r\n                    colliderList,\r\n                );\r\n                if (this.drawGizmo && this.boneGizmoList[index]) {\r\n                    this.boneGizmoList[index].position = verlet.transform.absolutePosition;\r\n                    this.boneGizmoList[index].rotationQuaternion = verlet.transform.rotationQuaternion;\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n\r\n        return Promise.all(promises).then(() => { /* Do Nothing */ });\r\n    }\r\n\r\n    private setupRecursive(center: Nullable<TransformNode>, parent: TransformNode): void {\r\n        if (parent.getChildTransformNodes().length === 0) {\r\n            // Leaf\r\n            const ancestor = parent.parent as TransformNode;\r\n            const delta = parent.getAbsolutePosition().subtract(ancestor.getAbsolutePosition()).normalize();\r\n            const childPosition = parent.position.add(Vector3Helper.multiplyByFloat(delta, 0.07));\r\n            this.verlets.push(new VRMSpringBoneLogic(\r\n                center,\r\n                this.hitRadius,\r\n                parent,\r\n                childPosition,\r\n            ));\r\n        } else {\r\n            // Not leaf\r\n            const firstChild = parent.getChildTransformNodes().shift()!;\r\n            const localPosition = firstChild.position;\r\n            const scale = firstChild.scaling;\r\n            this.verlets.push(new VRMSpringBoneLogic(\r\n                center,\r\n                this.hitRadius,\r\n                parent,\r\n                localPosition.multiply(scale),\r\n            ));\r\n        }\r\n\r\n        if (this.drawGizmo) {\r\n            const boneGizmo = MeshBuilder.CreateSphere(parent.name + '_boneGizmo', {\r\n                segments: 8,\r\n                diameter: this.hitRadius * 2,\r\n                updatable: true,\r\n            }, parent.getScene());\r\n            const mat = new StandardMaterial(parent.name + '_boneGizmomat', parent.getScene());\r\n            mat.emissiveColor = Color3.Red();\r\n            mat.wireframe = true;\r\n            boneGizmo.material = mat;\r\n            this.boneGizmoList.push(boneGizmo);\r\n        }\r\n\r\n        parent.getChildTransformNodes().forEach((child) => {\r\n            this.setupRecursive(center, child);\r\n        });\r\n    }\r\n}\r\n","import { ArcRotateCamera } from '@babylonjs/core/Cameras/arcRotateCamera';\r\nimport { Engine } from '@babylonjs/core/Engines/engine';\r\nimport { DirectionalLight } from '@babylonjs/core/Lights/directionalLight';\r\nimport { HemisphericLight } from '@babylonjs/core/Lights/hemisphericLight';\r\nimport { PointLight } from '@babylonjs/core/Lights/pointLight';\r\nimport { ShadowGenerator } from '@babylonjs/core/Lights/Shadows/shadowGenerator';\r\nimport { SceneLoader } from '@babylonjs/core/Loading/sceneLoader';\r\nimport { Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { Scene } from '@babylonjs/core/scene';\r\nimport { VRMManager } from '../vrm-manager';\r\n\r\nimport '@babylonjs/core/Helpers/sceneHelpers';\r\nimport '@babylonjs/core/Meshes/Builders/sphereBuilder';\r\nimport '@babylonjs/core/Meshes/Builders/torusKnotBuilder';\r\nimport '@babylonjs/inspector';\r\nimport '../index';\r\n\r\nasync function main() {\r\n    const debugProperties = getDebugProperties();\r\n    const canvas = document.getElementById('main-canvas') as HTMLCanvasElement;\r\n    const engine = new Engine(\r\n        canvas,\r\n        true,\r\n        {\r\n            alpha: false,\r\n            disableWebGL2Support: debugProperties.webgl1,\r\n        },\r\n    );\r\n\r\n    const scene = new Scene(engine);\r\n    const camera = new ArcRotateCamera('MainCamera1', 0, 0, 3, new Vector3(0, 1.2, 0), scene, true);\r\n    camera.lowerRadiusLimit = 0.1;\r\n    camera.upperRadiusLimit = 20;\r\n    camera.wheelDeltaPercentage = 0.01;\r\n    camera.minZ = 0.3;\r\n    camera.position = new Vector3(0, 1.2, -3);\r\n    camera.attachControl(canvas, true);\r\n\r\n    scene.createDefaultEnvironment({\r\n        createGround: true,\r\n        createSkybox: false,\r\n        enableGroundMirror: false,\r\n        enableGroundShadow: false,\r\n    });\r\n\r\n    // Lights\r\n    const directionalLight = new DirectionalLight('DirectionalLight1', new Vector3(0, -0.5, 1.0), scene);\r\n    directionalLight.position = new Vector3(0, 25, -50);\r\n    directionalLight.setEnabled(true);\r\n    const hemisphericLight = new HemisphericLight('HemisphericLight1', new Vector3(-0.2, -0.8, -1), scene);\r\n    hemisphericLight.setEnabled(false);\r\n    const pointLight = new PointLight('PointLight1', new Vector3(0, 0, 1), scene);\r\n    pointLight.setEnabled(false);\r\n\r\n    // Meshes\r\n    const standardMaterialSphere = Mesh.CreateSphere('StandardMaterialSphere1', 16, 1, scene);\r\n    standardMaterialSphere.position = new Vector3(1.5, 1.2, 0);\r\n    standardMaterialSphere.receiveShadows = true;\r\n\r\n    const shadowCaster = Mesh.CreateTorusKnot('ShadowCaster', 1, 0.2, 32, 32, 2, 3, scene);\r\n    shadowCaster.position = new Vector3(0.0, 5.0, -10.0);\r\n    shadowCaster.setEnabled(debugProperties.shadow);\r\n    if (debugProperties.shadow) {\r\n        const shadowGenerator = new ShadowGenerator(1024, directionalLight);\r\n        shadowGenerator.addShadowCaster(shadowCaster);\r\n    }\r\n\r\n    if (debugProperties.inspector) {\r\n        await scene.debugLayer.show({\r\n            globalRoot: document.getElementById('wrapper') as HTMLElement,\r\n        });\r\n    }\r\n\r\n    // Expose current scene\r\n    (window as any).currentScene = scene;\r\n\r\n    scene.onBeforeRenderObservable.add(() => {\r\n        // SpringBone\r\n        if (!scene.metadata || !scene.metadata.vrmManagers) {\r\n            return;\r\n        }\r\n        const managers = scene.metadata.vrmManagers as VRMManager[];\r\n        const deltaTime = scene.getEngine().getDeltaTime();\r\n        managers.forEach((manager) => {\r\n            manager.update(deltaTime);\r\n        });\r\n    });\r\n    engine.runRenderLoop(() => {\r\n        scene.render();\r\n        shadowCaster.rotate(Vector3.Up(), 0.01);\r\n    });\r\n    window.addEventListener('resize', () => {\r\n        engine.resize();\r\n    });\r\n    await SceneLoader.AppendAsync('./', 'AliciaSolid.vrm', scene);\r\n\r\n    let fileCount = 1;\r\n    (document.getElementById('file-input') as HTMLInputElement).addEventListener('change', (evt) => {\r\n        const file = (evt as any).target.files[0];\r\n        console.log(`loads ${file.name} ${file.size} bytes`);\r\n        const currentMeshCount = scene.meshes.length;\r\n        SceneLoader.Append('file:', file, scene, () => {\r\n            console.log(`loaded ${file.name}`);\r\n            for (let i = currentMeshCount; i < scene.meshes.length; i++) {\r\n                scene.meshes[i].translate(Vector3.Right(), 1.5 * fileCount);\r\n                scene.meshes[i].receiveShadows = true;\r\n            }\r\n            fileCount++;\r\n        });\r\n    });\r\n}\r\n\r\ninterface DebugProperties {\r\n    webgl1: boolean;\r\n    shadow: boolean;\r\n    inspector: boolean;\r\n}\r\n\r\nfunction getDebugProperties(): DebugProperties {\r\n    const href = window.location.href;\r\n\r\n    return {\r\n        webgl1: href.includes('webgl1'),\r\n        shadow: href.includes('shadow'),\r\n        inspector: href.includes('inspector'),\r\n    };\r\n}\r\n\r\nmain().catch((reason) => {\r\n    console.error(reason);\r\n});\r\n","import { Material } from '@babylonjs/core/Materials/material';\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\nimport { Nullable } from '@babylonjs/core/types';\nimport { GLTFLoader, IGLTFLoaderExtension, IMaterial } from '@babylonjs/loaders/glTF/2.0';\nimport { VRMMaterialGenerator } from './vrm-material-generator';\n\n/**\n * `extensions` \n */\nconst NAME = 'VCAST_vci_material_unity';\n\n/**\n * VCAST_vci_material_unity \n */\nexport class VCAST_vci_material_unity implements IGLTFLoaderExtension {\n    /**\n     * @inheritdoc\n     */\n    public readonly name = NAME;\n    /**\n     * @inheritdoc\n     */\n    public enabled = true;\n\n    /**\n     * @inheritdoc\n     */\n    public constructor(\n        private loader: GLTFLoader,\n    ) {}\n\n    /**\n     * @inheritdoc\n     */\n    public dispose(): void {\n        delete this.loader;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public _loadMaterialAsync(\n        context: string,\n        material: IMaterial,\n        mesh: Mesh,\n        babylonDrawMode: number,\n        assign: (babylonMaterial: Material) => void,\n    ): Nullable<Promise<Material>> {\n        // \n        return (new VRMMaterialGenerator(this.loader)).generate(context, material, mesh, babylonDrawMode, assign);\n    }\n}\n\n// \nGLTFLoader.RegisterExtension(NAME, (loader) => new VCAST_vci_material_unity(loader));\n","import { Material } from '@babylonjs/core/Materials/material';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { GLTFLoader, IGLTFLoaderExtension, IMaterial, IMeshPrimitive } from '@babylonjs/loaders/glTF/2.0';\r\nimport { VRMManager } from './vrm-manager';\r\nimport { VRMMaterialGenerator } from './vrm-material-generator';\r\n\r\n/**\r\n * `extensions` \r\n */\r\nconst NAME = 'VRM';\r\n\r\n/**\r\n * VRM \r\n * [Specification](https://github.com/vrm-c/UniVRM/tree/master/specification/)\r\n */\r\nexport class VRM implements IGLTFLoaderExtension {\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public readonly name = NAME;\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public enabled = true;\r\n    /**\r\n     *  Mesh index \r\n     */\r\n    private meshesFrom = 0;\r\n    /**\r\n     *  TransformNode index \r\n     */\r\n    private transformNodesFrom = 0;\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public constructor(\r\n        private loader: GLTFLoader,\r\n    ) {\r\n        // GLTFLoader has already added rootMesh as __root__ before load extension\r\n        // @see glTFLoader._loadData\r\n        this.meshesFrom = this.loader.babylonScene.meshes.length - 1;\r\n        this.transformNodesFrom = this.loader.babylonScene.transformNodes.length;\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public dispose(): void {\r\n        delete this.loader;\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public onReady() {\r\n        if (!this.loader.gltf.extensions || !this.loader.gltf.extensions[NAME]) {\r\n            return;\r\n        }\r\n        const scene = this.loader.babylonScene;\r\n        const manager = new VRMManager(\r\n            this.loader.gltf.extensions[NAME],\r\n            this.loader.babylonScene,\r\n            this.meshesFrom,\r\n            this.transformNodesFrom,\r\n        );\r\n        scene.metadata = scene.metadata || {};\r\n        scene.metadata.vrmManagers = scene.metadata.vrmManagers || [];\r\n        scene.metadata.vrmManagers.push(manager);\r\n        this.loader.babylonScene.onDisposeObservable.add(() => {\r\n            // Scene dispose  Manager \r\n            manager.dispose();\r\n            this.loader.babylonScene.metadata.vrmManagers = [];\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public _loadVertexDataAsync(\r\n        context: string,\r\n        primitive: IMeshPrimitive,\r\n        babylonMesh: Mesh,\r\n    ) {\r\n        if (!primitive.extras || !primitive.extras.targetNames) {\r\n            return null;\r\n        }\r\n        //  MorphTarget \r\n        babylonMesh.metadata = babylonMesh.metadata || {};\r\n        babylonMesh.metadata.vrmTargetNames = primitive.extras.targetNames;\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public _loadMaterialAsync(\r\n        context: string,\r\n        material: IMaterial,\r\n        mesh: Mesh,\r\n        babylonDrawMode: number,\r\n        assign: (babylonMaterial: Material) => void,\r\n    ): Nullable<Promise<Material>> {\r\n        // \r\n        return (new VRMMaterialGenerator(this.loader)).generate(context, material, mesh, babylonDrawMode, assign);\r\n    }\r\n}\r\n\r\n// \r\nGLTFLoader.RegisterExtension(NAME, (loader) => new VRM(loader));\r\n","import { SceneLoader } from '@babylonjs/core/Loading/sceneLoader';\nimport { GLTFFileLoader } from '@babylonjs/loaders/glTF/glTFFileLoader';\n\n/**\n * VRM/VCI \n * \n */\nexport class VRMFileLoader extends GLTFFileLoader {\n  public name = 'vrm';\n  public extensions = {\n    '.vrm': { isBinary: true },\n    '.vci': { isBinary: true },\n  };\n\n  public createPlugin() {\n      return new VRMFileLoader();\n  }\n}\n\nif (SceneLoader) {\n  SceneLoader.RegisterPlugin(new VRMFileLoader());\n}\n","export interface IVRMVector3 {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n}\r\n\r\n/**\r\n * extensions.VRM\r\n */\r\nexport interface IVRM {\r\n    exporterVersion: string;\r\n    specVersion: string;\r\n    meta: IVRMMeta;\r\n    humanoid: IVRMHumanoid;\r\n    firstPerson: IVRMFirstPerson;\r\n    blendShapeMaster: IVRMBlendShapeMaster;\r\n    secondaryAnimation: IVRMSecondaryAnimation;\r\n    materialProperties: IVRMMaterialProperty[];\r\n}\r\n\r\n/**\r\n * extensions.VRM.meta\r\n */\r\nexport interface IVRMMeta {\r\n    title: string;\r\n    version: string;\r\n    author: string;\r\n    contactInformation?: string;\r\n    reference?: string;\r\n    texture?: number;\r\n}\r\n\r\n/**\r\n * extensions.VRM.humanoid\r\n */\r\nexport interface IVRMHumanoid {\r\n    humanBones: IVRMHumanoidBone[];\r\n    armStretch?: number;\r\n    legStretch?: number;\r\n    upperArmTwist?: number;\r\n    lowerArmTwist?: number;\r\n    upperLegTwist?: number;\r\n    lowerLegTwist?: number;\r\n    feetSpacing?: number;\r\n    hasTranslationDoF?: boolean;\r\n}\r\n\r\nexport interface IVRMHumanoidBone {\r\n    bone: string;\r\n    node: number;\r\n    useDefaultValues: boolean;\r\n    min?: IVRMVector3;\r\n    max?: IVRMVector3;\r\n    center?: IVRMVector3;\r\n    axisLength?: number;\r\n}\r\n\r\nexport interface IVRMFirstPersonMeshAnnotation {\r\n    mesh: number;\r\n    firstPersonFlag: string;\r\n}\r\n\r\nexport interface IVRMFirstPersonDegreeMap {\r\n    curve: number[];\r\n    xRange: number;\r\n    yRange: number;\r\n}\r\n\r\n/**\r\n * extensions.VRM.firstPerson\r\n */\r\nexport interface IVRMFirstPerson {\r\n    firstPersonBone: number;\r\n    firstPersonBoneOffset: IVRMVector3;\r\n    meshAnnotations: IVRMFirstPersonMeshAnnotation[];\r\n    lookAtTypeName: 'Bone' | 'BlendShape';\r\n    lookAtHorizontalInner: IVRMFirstPersonDegreeMap;\r\n    lookAtHorizontalOuter: IVRMFirstPersonDegreeMap;\r\n    lookAtVerticalDown: IVRMFirstPersonDegreeMap;\r\n    lookAtVerticalUp: IVRMFirstPersonDegreeMap;\r\n}\r\n\r\n/**\r\n * extensions.VRM.blendShapeMaster\r\n */\r\nexport interface IVRMBlendShapeMaster {\r\n    blendShapeGroups: IVRMBlendShapeGroup[];\r\n}\r\n\r\nexport interface IVRMBlendShapeGroup {\r\n    name: string;\r\n    presetName: string;\r\n    binds: IVRMBlendShapeBind[];\r\n    materialValues: IVRMBlendShapeMaterialBind[];\r\n}\r\n\r\nexport interface IVRMBlendShapeBind {\r\n    mesh: number;\r\n    index: number;\r\n    weight: number;\r\n}\r\n\r\nexport interface IVRMBlendShapeMaterialBind {\r\n    materialName: string;\r\n    propertyName: string;\r\n    targetValue: number[];\r\n}\r\n\r\nexport interface IVRMSecondaryAnimationSpring {\r\n    comment: string;\r\n    stiffiness: number;\r\n    gravityPower: number;\r\n    gravityDir: IVRMVector3;\r\n    dragForce: number;\r\n    center: number;\r\n    hitRadius: number;\r\n    bones: number[];\r\n    colliderGroups: number[];\r\n}\r\n\r\nexport interface IVRMSecondaryAnimationCollider {\r\n    offset: IVRMVector3;\r\n    radius: number;\r\n}\r\n\r\nexport interface IVRMSecondaryAnimationColliderGroup {\r\n    node: number;\r\n    colliders: IVRMSecondaryAnimationCollider[];\r\n}\r\n\r\n/**\r\n * extensions.VRM.secondaryAnimation\r\n */\r\nexport interface IVRMSecondaryAnimation {\r\n    boneGroups: IVRMSecondaryAnimationSpring[];\r\n    colliderGroups: IVRMSecondaryAnimationColliderGroup[];\r\n}\r\n\r\nexport enum IVRMMaterialPropertyShader {\r\n    VRM_USE_GLTFSHADER = 'VRM_USE_GLTFSHADER',\r\n    VRMMToon = 'VRM/MToon',\r\n    VRMUnlitTransparentZWrite = 'VRM/UnlitTransparentZWrite',\r\n}\r\n\r\nexport interface IVRMMaterialPropertyFloatProperties {\r\n    _Cutoff?: number;\r\n    _BumpScale?: number;\r\n    _ReceiveShadowRate?: number;\r\n    _ShadingGradeRate?: number;\r\n    _ShadeShift?: number;\r\n    _ShadeToony?: number;\r\n    _LightColorAttenuation?: number;\r\n    _IndirectLightIntensity?: number;\r\n    _RimLightingMix?: number;\r\n    _RimFresnelPower?: number;\r\n    _RimLift?: number;\r\n    _OutlineWidth?: number;\r\n    _OutlineScaledMaxDistance?: number;\r\n    _OutlineLightingMix?: number;\r\n    _UvAnimScrollX?: number;\r\n    _UvAnimScrollY?: number;\r\n    _UvAnimRotation?: number;\r\n    _DebugMode?: number;\r\n    _BlendMode?: number;\r\n    _OutlineWidthMode?: number;\r\n    _OutlineColorMode?: number;\r\n    _CullMode?: number;\r\n    _OutlineCullMode?: number;\r\n    _SrcBlend?: number;\r\n    _DstBlend?: number;\r\n    _ZWrite?: number;\r\n    [prop: string]: number | undefined;\r\n}\r\n\r\nexport type IVRMVectorMaterialProperty = [number, number, number, number];\r\n\r\nexport interface IVRMMaterialPropertyVectorProperties {\r\n    _Color?: IVRMVectorMaterialProperty;\r\n    _ShadeColor?: IVRMVectorMaterialProperty;\r\n    _MainTex?: IVRMVectorMaterialProperty;\r\n    _ShadeTexture?: IVRMVectorMaterialProperty;\r\n    _BumpMap?: IVRMVectorMaterialProperty;\r\n    _ReceiveShadowTexture?: IVRMVectorMaterialProperty;\r\n    _ShadingGradeTexture?: IVRMVectorMaterialProperty;\r\n    _RimColor?: IVRMVectorMaterialProperty;\r\n    _RimTexture?: IVRMVectorMaterialProperty;\r\n    _SphereAdd?: IVRMVectorMaterialProperty;\r\n    _EmissionColor?: IVRMVectorMaterialProperty;\r\n    _EmissionMap?: IVRMVectorMaterialProperty;\r\n    _OutlineWidthTexture?: IVRMVectorMaterialProperty;\r\n    _OutlineColor?: IVRMVectorMaterialProperty;\r\n    _UvAnimMaskTexture?: IVRMVectorMaterialProperty;\r\n    [prop: string]: IVRMVectorMaterialProperty | undefined;\r\n}\r\n\r\nexport interface IVRMMaterialPropertyTextureProperties {\r\n    _MainTex?: number;\r\n    _ShadeTexture?: number;\r\n    _BumpMap?: number;\r\n    _ReceiveShadowTexture?: number;\r\n    _ShadingGradeTexture?: number;\r\n    _RimTexture?: number;\r\n    _SphereAdd?: number;\r\n    _EmissionMap?: number;\r\n    _OutlineWidthTexture?: number;\r\n    _UvAnimMaskTexture?: number;\r\n    [prop: string]: number | undefined;\r\n}\r\n\r\nexport interface IVRMMaterialPropertyKeywordMap {\r\n    _NORMALMAP?: boolean;\r\n    _ALPHATEST_ON?: boolean;\r\n    _ALPHABLEND_ON?: boolean;\r\n    _ALPHAPREMULTIPLY_ON?: boolean;\r\n}\r\n\r\nexport interface IVRMMaterialPropertyTagMap {\r\n    RenderType?: 'Opaque' | 'TransparentCutout' | 'Transparent';\r\n}\r\n\r\n/**\r\n * extensions.VRM.materialProperties\r\n */\r\nexport interface IVRMMaterialProperty {\r\n    name: string;\r\n    shader: IVRMMaterialPropertyShader;\r\n    renderQueue: number;\r\n    floatProperties: IVRMMaterialPropertyFloatProperties;\r\n    vectorProperties: IVRMMaterialPropertyVectorProperties;\r\n    textureProperties: IVRMMaterialPropertyTextureProperties;\r\n    keywordMap: IVRMMaterialPropertyKeywordMap;\r\n    tagMap: IVRMMaterialPropertyTagMap;\r\n}\r\n","import { Vector3 } from '@babylonjs/core/Maths/math';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode';\r\nimport { MorphTarget } from '@babylonjs/core/Morph/morphTarget';\r\nimport { Scene } from '@babylonjs/core/scene';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { SpringBoneController } from './secondary-animation/spring-bone-controller';\r\nimport { HumanoidBone } from './humanoid-bone';\r\nimport { IVRM } from './vrm-interfaces';\r\n\r\ninterface MorphTargetSetting {\r\n    target: MorphTarget;\r\n    weight: number;\r\n}\r\n\r\ninterface MorphTargetMap {\r\n    [morphName: string]: MorphTargetSetting[];\r\n}\r\n\r\ninterface TransformNodeMap {\r\n    [humanBoneName: string]: TransformNode;\r\n}\r\n\r\ninterface TransformNodeCache {\r\n    [nodeIndex: number]: TransformNode;\r\n}\r\n\r\ninterface MeshCache {\r\n    [meshIndex: number]: Mesh[];\r\n}\r\n\r\n/**\r\n * Unity Humanoid Bone \r\n */\r\nexport type HumanBoneName = 'hips' | 'leftUpperLeg' | 'rightUpperLeg' | 'leftLowerLeg' | 'rightLowerLeg' | 'leftFoot' | 'rightFoot' | 'spine' | 'chest' | 'neck' | 'head' | 'leftShoulder' | 'rightShoulder' | 'leftUpperArm' | 'rightUpperArm' | 'leftLowerArm' | 'rightLowerArm' | 'leftHand' | 'rightHand' | 'leftToes' | 'rightToes' | 'leftEye' | 'rightEye' | 'jaw' | 'leftThumbProximal' | 'leftThumbIntermediate' | 'leftThumbDistal' | 'leftIndexProximal' | 'leftIndexIntermediate' | 'leftIndexDistal' | 'leftMiddleProximal' | 'leftMiddleIntermediate' | 'leftMiddleDistal' | 'leftRingProximal' | 'leftRingIntermediate' | 'leftRingDistal' | 'leftLittleProximal' | 'leftLittleIntermediate' | 'leftLittleDistal' | 'rightThumbProximal' | 'rightThumbIntermediate' | 'rightThumbDistal' | 'rightIndexProximal' | 'rightIndexIntermediate' | 'rightIndexDistal' | 'rightMiddleProximal' | 'rightMiddleIntermediate' | 'rightMiddleDistal' | 'rightRingProximal' | 'rightRingIntermediate' | 'rightRingDistal' | 'rightLittleProximal' | 'rightLittleIntermediate' | 'rightLittleDistal' | 'upperChest' | string;\r\n\r\n/**\r\n * VRM \r\n */\r\nexport class VRMManager {\r\n    private morphTargetMap: MorphTargetMap = {};\r\n    private presetMorphTargetMap: MorphTargetMap = {};\r\n    private transformNodeMap: TransformNodeMap = {};\r\n    private transformNodeCache: TransformNodeCache = {};\r\n    private meshCache: MeshCache = {};\r\n    private _humanoidBone: HumanoidBone;\r\n    private _rootMesh: Mesh;\r\n\r\n    /**\r\n     * Secondary Animation  VRM Spring Bone \r\n     */\r\n    public readonly springBoneController: SpringBoneController;\r\n\r\n    /**\r\n     *\r\n     * @param ext glTF.extensions.VRM  json\r\n     * @param scene\r\n     * @param meshesFrom  VRM \r\n     * @param transformNodesFrom  TransformNode  VRM \r\n     */\r\n    public constructor(\r\n        public readonly ext: IVRM,\r\n        public readonly scene: Scene,\r\n        private readonly meshesFrom: number,\r\n        private readonly transformNodesFrom: number,\r\n    ) {\r\n        this.meshCache = this.constructMeshCache();\r\n        this.transformNodeCache = this.constructTransformNodeCache();\r\n        this.springBoneController = new SpringBoneController(\r\n            this.ext.secondaryAnimation,\r\n            this.findTransformNode.bind(this),\r\n        );\r\n        this.springBoneController.setup();\r\n\r\n        this.constructMorphTargetMap();\r\n        this.constructTransformNodeMap();\r\n\r\n        this._humanoidBone = new HumanoidBone(this.transformNodeMap);\r\n    }\r\n\r\n    /**\r\n     * Secondary Animation \r\n     *\r\n     * @param deltaTime (sec)\r\n     */\r\n    public async update(deltaTime: number): Promise<void> {\r\n        await this.springBoneController.update(deltaTime);\r\n    }\r\n\r\n    /**\r\n     * \r\n     */\r\n    public dispose(): void {\r\n        this.springBoneController.dispose();\r\n        this._humanoidBone.dispose();\r\n\r\n        delete this.morphTargetMap;\r\n        delete this.presetMorphTargetMap;\r\n        delete this.transformNodeMap;\r\n        delete this.transformNodeCache;\r\n        delete this.meshCache;\r\n        delete this._rootMesh;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param label \r\n     * @param value (01)\r\n     */\r\n    public morphing(label: string, value: number): void {\r\n        if (!this.morphTargetMap[label]) {\r\n            return;\r\n        }\r\n        this.morphTargetMap[label].forEach((setting) => {\r\n            setting.target.influence = Math.max(0, Math.min(1, value)) * (setting.weight / 100);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param label \r\n     * @param value (01)\r\n     */\r\n    public morphingPreset(label: string, value: number): void {\r\n        if (!this.presetMorphTargetMap[label]) {\r\n            return;\r\n        }\r\n        this.presetMorphTargetMap[label].forEach((setting) => {\r\n            setting.target.influence = Math.max(0, Math.min(1, value)) * (setting.weight / 100);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * list morphing name\r\n     */\r\n    public getMorphingList(): string[] {\r\n        return Object.keys(this.morphTargetMap);\r\n    }\r\n\r\n    /**\r\n     * \r\n     *\r\n     * firstPersonBone  null \r\n     *\r\n     * @returns \r\n     */\r\n    public getFirstPersonCameraPosition(): Nullable<Vector3> {\r\n        const firstPersonBone = this.getFirstPersonBone();\r\n        if (!firstPersonBone) {\r\n            return null;\r\n        }\r\n\r\n        let basePos = firstPersonBone.getAbsolutePosition();\r\n        const offsetPos = this.ext.firstPerson.firstPersonBoneOffset;\r\n        return new Vector3(\r\n            basePos.x + offsetPos.x,\r\n            basePos.y + offsetPos.y,\r\n            basePos.z + offsetPos.z,\r\n        );\r\n    }\r\n\r\n    /**\r\n     *  TransformNode \r\n     */\r\n    public getFirstPersonBone(): Nullable<TransformNode> {\r\n        return this.findTransformNode(this.ext.firstPerson.firstPersonBone);\r\n    }\r\n\r\n    /**\r\n     *  TransformNode \r\n     *\r\n     * @param name HumanBoneName\r\n     * @deprecated Use humanoidBone getter instead. This method will delete at v2.\r\n     */\r\n    public getBone(name: HumanBoneName): Nullable<TransformNode> {\r\n        return this.transformNodeMap[name] || null;\r\n    }\r\n\r\n    /**\r\n     * Get HumanoidBone Methods\r\n     */\r\n    public get humanoidBone(): HumanoidBone {\r\n        return this._humanoidBone;\r\n    }\r\n\r\n    /**\r\n     * VRM Root mesh\r\n     *\r\n     * Useful for Model Transformation\r\n     */\r\n    public get rootMesh(): Mesh {\r\n        return this._rootMesh;\r\n    }\r\n\r\n    /**\r\n     * node  TransformNode \r\n     * \r\n     * gltf  node  `metadata.gltf.pointers` \r\n     * @param nodeIndex\r\n     */\r\n    public findTransformNode(nodeIndex: number): Nullable<TransformNode> {\r\n        return this.transformNodeCache[nodeIndex] || null;\r\n    }\r\n\r\n    /**\r\n     * mesh \r\n     * gltf  mesh  `metadata.gltf.pointers` \r\n     * @deprecated Use findMeshes instead. This method has broken.\r\n     */\r\n    public findMesh(meshIndex: number): Nullable<Mesh> {\r\n        return this.meshCache[meshIndex] && this.meshCache[meshIndex][0] || null;\r\n    }\r\n\r\n    /**\r\n     * mesh \r\n     * gltf  mesh  `metadata.gltf.pointers` \r\n     */\r\n    public findMeshes(meshIndex: number): Nullable<Mesh[]> {\r\n        return this.meshCache[meshIndex] || null;\r\n    }\r\n\r\n    /**\r\n     *  MorphTarget  BlendShape \r\n     */\r\n    private constructMorphTargetMap(): void {\r\n        if (!this.ext.blendShapeMaster || !this.ext.blendShapeMaster.blendShapeGroups) {\r\n            return;\r\n        }\r\n        this.ext.blendShapeMaster.blendShapeGroups.forEach((g) => {\r\n            if (!g.binds) {\r\n                return;\r\n            }\r\n            g.binds.forEach((b) => {\r\n                const meshes = this.findMeshes(b.mesh);\r\n                if (!meshes) {\r\n                    console.log(`Undefined BlendShapeBind Mesh`, b);\r\n                    return;\r\n                }\r\n                meshes.forEach((mesh) => {\r\n                    const morphTargetManager = mesh.morphTargetManager;\r\n                    if (!morphTargetManager) {\r\n                        console.log(`Undefined morphTargetManager`, b);\r\n                        return;\r\n                    }\r\n                    const target = morphTargetManager.getTarget(b.index);\r\n                    this.morphTargetMap[g.name] = this.morphTargetMap[g.name] || [];\r\n                    this.morphTargetMap[g.name].push({\r\n                        target,\r\n                        weight: b.weight,\r\n                    });\r\n                    if (g.presetName) {\r\n                        this.presetMorphTargetMap[g.presetName] = this.presetMorphTargetMap[g.presetName] || [];\r\n                        this.presetMorphTargetMap[g.presetName].push({\r\n                            target,\r\n                            weight: b.weight,\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n            // TODO: materialValues\r\n        });\r\n    }\r\n\r\n    /**\r\n     *  TransformNode  bone \r\n     */\r\n    private constructTransformNodeMap() {\r\n        this.ext.humanoid.humanBones.forEach((b) => {\r\n            const node = this.findTransformNode(b.node);\r\n            if (!node) {\r\n                return;\r\n            }\r\n            this.transformNodeMap[b.bone] = node;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * node  TransformNode \r\n     */\r\n    private constructTransformNodeCache() {\r\n        const cache: TransformNodeCache = {};\r\n        for (let index = this.transformNodesFrom; index < this.scene.transformNodes.length; index++) {\r\n            const node = this.scene.transformNodes[index];\r\n            // \r\n            if (!node || !node.metadata || !node.metadata.gltf || !node.metadata.gltf.pointers || node.metadata.gltf.pointers.length === 0) {\r\n                continue;\r\n            }\r\n            for (const pointer of node.metadata.gltf.pointers) {\r\n                if (pointer.startsWith('/nodes/')) {\r\n                    const nodeIndex = parseInt((pointer as string).substr(7), 10);\r\n                    cache[nodeIndex] = node;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return cache;\r\n    }\r\n\r\n    /**\r\n     * mesh  Mesh \r\n     */\r\n    private constructMeshCache() {\r\n        const cache: MeshCache = {};\r\n        for (let index = this.meshesFrom; index < this.scene.meshes.length; index++) {\r\n            const mesh = this.scene.meshes[index];\r\n            if (mesh.id === '__root__') {\r\n                this._rootMesh = mesh as Mesh;\r\n                continue;\r\n            }\r\n            // \r\n            if (!mesh || !mesh.metadata || !mesh.metadata.gltf || !mesh.metadata.gltf.pointers || mesh.metadata.gltf.pointers.length === 0) {\r\n                continue;\r\n            }\r\n            for (const pointer of mesh.metadata.gltf.pointers) {\r\n                const match = (pointer as string).match(/^\\/meshes\\/(\\d+).+$/);\r\n                if (match) {\r\n                    const nodeIndex = parseInt(match[1], 10);\r\n                    cache[nodeIndex] = cache[nodeIndex] || [];\r\n                    cache[nodeIndex].push(mesh as Mesh);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return cache;\r\n    }\r\n}\r\n","import { Material } from '@babylonjs/core/Materials/material';\r\nimport { BaseTexture } from '@babylonjs/core/Materials/Textures/baseTexture';\r\nimport { Texture } from '@babylonjs/core/Materials/Textures/texture';\r\nimport { Color3 } from '@babylonjs/core/Maths/math';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { GLTFLoader, IMaterial } from '@babylonjs/loaders/glTF/2.0';\r\nimport { MToonMaterial } from 'babylon-mtoon-material';\r\nimport { IVRMMaterialProperty, IVRMMaterialPropertyShader, IVRMVectorMaterialProperty } from './vrm-interfaces';\r\nimport { Engine } from '@babylonjs/core/Engines/engine';\r\n\r\n/**\r\n * VRM  Material \r\n * [VRM ](https://vrm.dev/vrm_spec/#vrm%E3%81%8C%E6%8F%90%E4%BE%9B%E3%81%99%E3%82%8B%E3%82%B7%E3%82%A7%E3%83%BC%E3%83%80%E3%83%BC) \r\n * - UnlitTexture: , VRM  [KHR_materials_unlit](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit/) \r\n * - UnlitCutout: , \r\n * - UnlitTransparent: ZWrite, \r\n * - UnlitTransparentZWrite: ZWrite,  ZWrite \r\n * - MToon: MToonMaterial \r\n */\r\nexport class VRMMaterialGenerator {\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    public constructor(\r\n        private readonly loader: GLTFLoader,\r\n    ) {}\r\n\r\n    /**\r\n     *  Promise \r\n     * VRM  null\r\n     */\r\n    public generate(\r\n        context: string,\r\n        material: IMaterial,\r\n        mesh: Mesh,\r\n        babylonDrawMode: number,\r\n        assign: (babylonMaterial: Material) => void,\r\n    ): Nullable<Promise<Material>> {\r\n        const materialProp = this.findMaterialPropertyByName(\r\n            material.name,\r\n            this.getMaterialProperties(),\r\n        );\r\n        if (!materialProp) {\r\n            return null;\r\n        }\r\n        mesh.alphaIndex = materialProp.renderQueue;\r\n        const newMaterial = this.createMaterialByShader(context, material, babylonDrawMode, materialProp);\r\n        if (!newMaterial) {\r\n            return null;\r\n        }\r\n        assign(newMaterial);\r\n        if (newMaterial instanceof MToonMaterial) {\r\n            return this.loadMToonTexturesAsync(context, newMaterial, materialProp);\r\n        }\r\n        return Promise.resolve(newMaterial);\r\n    }\r\n\r\n    /**\r\n     * VRM  VCI \r\n     */\r\n    private getMaterialProperties(): IVRMMaterialProperty[] {\r\n        if (!this.loader.gltf.extensions) {\r\n            return [];\r\n        }\r\n        if (this.loader.gltf.extensions.VRM && this.loader.gltf.extensions.VRM.materialProperties) {\r\n            return this.loader.gltf.extensions.VRM.materialProperties;\r\n        }\r\n        if (this.loader.gltf.extensions.VCAST_vci_material_unity && this.loader.gltf.extensions.VCAST_vci_material_unity.materials) {\r\n            return this.loader.gltf.extensions.VCAST_vci_material_unity.materials;\r\n        }\r\n        return [];\r\n    }\r\n\r\n    /**\r\n     *  MaterialProperty \r\n     * @param materialName \r\n     * @param extension \r\n     */\r\n    private findMaterialPropertyByName(materialName: string | undefined, materials: IVRMMaterialProperty[]): Nullable<IVRMMaterialProperty> {\r\n        if (!materialName || !materials) {\r\n            return null;\r\n        }\r\n        const mats = materials.filter((v) => v.name === materialName);\r\n        if (mats.length === 0) {\r\n            return null;\r\n        } else if (mats.length >= 2) {\r\n            this.loader.log(`Duplicated vrm material name found: ${materialName}`);\r\n        }\r\n        return mats[mats.length - 1];\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param context \r\n     * @param material  MToonMaterial\r\n     * @param prop  MToonMaterial \r\n     */\r\n    private loadMToonTexturesAsync(\r\n        context: string,\r\n        material: MToonMaterial,\r\n        prop: IVRMMaterialProperty,\r\n    ): Promise<Material> {\r\n        const promises: Array<Promise<BaseTexture>> = [];\r\n        //  UV Offset & Scale \r\n        const uvOffsetScale = prop.vectorProperties._MainTex;\r\n        if (!uvOffsetScale) {\r\n            return Promise.resolve(material);\r\n        }\r\n        const applyTexture = (index: number | undefined, callback: (texture: BaseTexture) => void) => {\r\n            applyPropertyWhenDefined<number>(index, (value) => {\r\n                promises.push(this.loader.loadTextureInfoAsync(\r\n                    `${context}/textures/${index}`,\r\n                    { index: value },\r\n                    (babylonTexture: BaseTexture) => {\r\n                        //  Texture \r\n                        const t = babylonTexture as Texture;\r\n                        t.uOffset = uvOffsetScale[0];\r\n                        t.vOffset = uvOffsetScale[1];\r\n                        t.uScale = uvOffsetScale[2];\r\n                        t.vScale = uvOffsetScale[3];\r\n                        callback(babylonTexture);\r\n                    },\r\n                ));\r\n            });\r\n        };\r\n\r\n        applyTexture(prop.textureProperties._MainTex, (texture) => material.diffuseTexture = texture);\r\n        applyTexture(prop.textureProperties._ShadeTexture, (texture) => material.shadeTexture = texture);\r\n        applyTexture(prop.textureProperties._BumpMap, (texture) => material.bumpTexture = texture);\r\n        applyTexture(prop.textureProperties._ReceiveShadowTexture, (texture) => material.receiveShadowTexture = texture);\r\n        applyTexture(prop.textureProperties._ShadingGradeTexture, (texture) => material.shadingGradeTexture = texture);\r\n        applyTexture(prop.textureProperties._RimTexture, (texture) => material.rimTexture = texture);\r\n        applyTexture(prop.textureProperties._SphereAdd, (texture) => material.matCapTexture = texture);\r\n        applyTexture(prop.textureProperties._EmissionMap, (texture) => material.emissiveTexture = texture);\r\n        applyTexture(prop.textureProperties._OutlineWidthTexture, (texture) => material.outlineWidthTexture = texture);\r\n        applyTexture(prop.textureProperties._UvAnimMaskTexture, (texture) => material.uvAnimationMaskTexture = texture);\r\n\r\n        return Promise.all(promises).then(() => material);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param context \r\n     * @param material glTF \r\n     * @param babylonDrawMode \r\n     * @param prop \r\n     */\r\n    private createMaterialByShader(\r\n        context: string,\r\n        material: IMaterial,\r\n        babylonDrawMode: number,\r\n        prop: IVRMMaterialProperty,\r\n    ): Nullable<Material> {\r\n        if (prop.shader === IVRMMaterialPropertyShader.VRMMToon) {\r\n            const mtoonMaterial = new MToonMaterial(\r\n                material.name || `MToonMaterial${material.index}`,\r\n                this.loader.babylonScene,\r\n            );\r\n            this.setMToonMaterialProperties(mtoonMaterial, prop);\r\n            return mtoonMaterial;\r\n        }\r\n        if (prop.shader === IVRMMaterialPropertyShader.VRMUnlitTransparentZWrite) {\r\n            const mat = this.loader.createMaterial(context, material, babylonDrawMode);\r\n            //  Depth Write \r\n            mat.disableDepthWrite = false;\r\n            mat.forceDepthWrite = true;\r\n            return mat;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     *  VRM \r\n     * VRM \r\n     * \r\n     */\r\n    private setMToonMaterialProperties(material: MToonMaterial, prop: IVRMMaterialProperty) {\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._Cutoff, (value) => material.alphaCutOff = value);\r\n        applyPropertyWhenDefined<IVRMVectorMaterialProperty>(prop.vectorProperties._Color, (value) => {\r\n            material.diffuseColor = new Color3(value[0], value[1], value[2]);\r\n            material.alpha = value[3];\r\n        });\r\n        applyPropertyWhenDefined<IVRMVectorMaterialProperty>(prop.vectorProperties._ShadeColor, (value) => {\r\n            material.shadeColor = new Color3(value[0], value[1], value[2]);\r\n        });\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._BumpScale, (value) => material.bumpScale = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._ReceiveShadowRate, (value) => material.receiveShadowRate = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._ShadingGradeRate, (value) => material.shadingGradeRate = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._ShadeShift, (value) => material.shadeShift = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._ShadeToony, (value) => material.shadeToony = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._LightColorAttenuation, (value) => material.lightColorAttenuation = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._IndirectLightIntensity, (value) => material.indirectLightIntensity = value);\r\n        applyPropertyWhenDefined<IVRMVectorMaterialProperty>(prop.vectorProperties._RimColor, (value) => {\r\n            material.rimColor = new Color3(value[0], value[1], value[2]);\r\n        });\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._RimLightingMix, (value) => material.rimLightingMix = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._RimFresnelPower, (value) => material.rimFresnelPower = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._RimLift, (value) => material.rimLift = value);\r\n        applyPropertyWhenDefined<IVRMVectorMaterialProperty>(prop.vectorProperties._EmissionColor, (value) => {\r\n            material.emissiveColor = new Color3(value[0], value[1], value[2]);\r\n        });\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineWidth, (value) => material.outlineWidth = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineScaledMaxDistance, (value) => material.outlineScaledMaxDistance = value);\r\n        applyPropertyWhenDefined<IVRMVectorMaterialProperty>(prop.vectorProperties._OutlineColor, (value) => {\r\n            material.outlineColor = new Color3(value[0], value[1], value[2]);\r\n        });\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineLightingMix, (value) => material.outlineLightingMix = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._UvAnimScrollX, (value) => material.uvAnimationScrollX = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._UvAnimScrollY, (value) => material.uvAnimationScrollY = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._UvAnimRotation, (value) => material.uvAnimationRotation = value);\r\n\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._DebugMode, (value) => material.debugMode = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._BlendMode, (value) => {\r\n            switch (value) {\r\n                case 0: // Opaque\r\n                    material.alphaBlend = false;\r\n                    material.alphaTest = false;\r\n                    material.alphaMode = Engine.ALPHA_DISABLE;\r\n                    break;\r\n                case 1: // TransparentCutout\r\n                    material.alphaBlend = false;\r\n                    material.alphaTest = true;\r\n                    material.alphaMode = Engine.ALPHA_COMBINE;\r\n                    break;\r\n                case 2: // Transparent\r\n                    material.alphaBlend = true;\r\n                    material.alphaTest = false;\r\n                    material.alphaMode = Engine.ALPHA_COMBINE;\r\n                    break;\r\n            }\r\n        });\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineWidthMode, (value) => material.outlineWidthMode = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineColorMode, (value) => material.outlineColorMode = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._CullMode, (value) => material.cullMode = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._OutlineCullMode, (value) => material.outlineCullMode = value);\r\n        applyPropertyWhenDefined<boolean>(prop.keywordMap._ALPHABLEND_ON, (value) => material.alphaBlend = value);\r\n        applyPropertyWhenDefined<boolean>(prop.keywordMap._ALPHATEST_ON, (value) => material.alphaTest = value);\r\n        applyPropertyWhenDefined<number>(prop.floatProperties._ZWrite, (value) => {\r\n            material.forceDepthWrite = (Math.round(value) === 1);\r\n            if (material.forceDepthWrite) {\r\n                material.disableDepthWrite = false;\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction applyPropertyWhenDefined<T>(prop: T | undefined, callback: (value: T) => void) {\r\n    if (typeof prop === 'undefined') {\r\n        return;\r\n    }\r\n    callback(prop);\r\n}\r\n"],"sourceRoot":""}